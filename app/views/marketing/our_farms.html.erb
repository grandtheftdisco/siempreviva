<div data-controller="scroll-navigation" class="scroll-nav-container">
  <!-- Frame 1: Hero -->
  <div class="hero-section px-4 py-8 -mt-30 scroll-mt-5 portrait:md:!-mt-40 portrait:lg:!-mt-30 landscape:!-mt-20 landscape:md:!-mt-30" data-scroll-section>
    <h1 class="hero-title-downcase">our farms</h1>

    <!-- Wrapper for image + text content (side-by-side in landscape) -->
    <div class="farms-hero-content-wrapper">
      <%= marketing_image_tag 'floral-dress-harvesting-03', style: 'object-position: 50% 70%' %>

      <!-- Text content wrapper -->
      <div class="hero-text-wrapper">
        <h2 class="section-title-center-italic landscape:hidden">lorem ipsum.</h2>
        <p class="section-body-text landscape:px-5">
          Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque faucibus ex sapien vitae pellentesque sem placerat.
          In id cursus mi pretium tellus duis convallis. Tempus leo eu aenean sed diam urna tempor. Pulvinar vivamus fringilla
          netus proin condimdm egestas.
        </p>
      </div>
    </div>

    <button
      data-action="click->scroll-navigation#scrollToNext"
      class="scroll-next-button portrait:lg:!bottom-32 landscape:md:!hidden landscape:lg:!block landscape:lg:!bottom-24 !bottom-10"
      aria-label="Scroll to next section">
      <%= scroll_arrow(:down) %>
    </button>
  </div>

  <!-- Frame 2: Content -->
  <div class="content-section" data-scroll-section>
    <div class="content-wrapper landscape:flex-row-reverse landscape:justify-center landscape:md:!gap-0">
      <%= marketing_image_tag 'tractor-in-fields' %>
      <hr class="content-divider" />
      <p class="section-body-text px-5 landscape:max-w-md">
        Vivamus elementum semper nisi. Aenean vulputate eleifend tellus. Aenean leo ligula, portitor eu, consequat vitae,
        eleifend ac, enim. Aliquam lorem ante, dapibus in, viverra quis, feugiat a, tellus. Phasellus viverra nulla ut metus
        varius laoreet. Quisque rutrum. Aenean imperdiet. Etiam ultricies nisi vel augue. Curabitur ullamcorper ultricies nisi.
      </p>
    </div>

    <button
      data-action="click->scroll-navigation#scrollToNext"
      class="scroll-next-button landscape:hidden"
      aria-label="Scroll to next section">
      <%= scroll_arrow(:down) %>
    </button>
  </div>

  <!-- Frame 3: CTA with image overlay -->
  <div class="content-section !landscape:pb-10 landscape:md:-mt-10 portrait:lg:!justify-center portrait:lg:-mt-20" data-scroll-section>
    <h2 class="section-title-center-italic -mt-20 mb-6">see us in action</h2>

    <%= link_to gallery_path do %>
      <!-- Images wrapper - 3 images inline in landscape, only middle visible in portrait -->
      <div class="cta-image-group-wrapper">
        <% @cta_images.each_with_index do |image, index| %>
          <%
            image_url = Cloudinary::Utils.cloudinary_url(
              image['public_id'],
              transformation: { width: 800, crop: 'limit', fetch_format: 'auto', quality: 'auto' }
            )
            alt_text = image.dig('context', 'custom', 'alt') || image['public_id'].split('/').last.humanize
            # Images 1 and 3 (index 0 and 2) hidden in portrait
            wrapper_class = (index == 0 || index == 2) ? 'portrait:hidden' : ''
          %>
          <div class="<%= wrapper_class %>">
            <%= image_tag image_url,
              alt: alt_text,
              class: 'marketing-image landscape:md:!block landscape:md:!h-24 landscape:md:!w-36 landscape:lg:!h-48 landscape:lg:!w-72',
              loading: 'lazy' %>
          </div>
        <% end %>
      </div>
    <% end %>

    <button
      data-action="click->scroll-navigation#scrollToTop"
      class="scroll-top-button"
      aria-label="Back to top">
      <%= scroll_arrow(:up) %>
      <span class="scroll-top-text">back to top</span>
    </button>
  </div>
</div>
