/* Search Stylesheet */
/* Contains all search-related styles including Algolia components and search dropdowns */

/* NOTE: All !important declarations in this file will be addressed in Session 5 of the CSS refactor plan.
   Session 5 focuses on specificity cleanup and removing !important hacks. */

/* NOTE: Any comments in this file that seem superfluous are to keep record of design decisions
   so that when the time comes for legacy cleanup & refactor in Session 4, there is context for the
   reasoning behind the vanilla code. */

/* ===== SEARCH SECTION LAYOUT ===== */

.search-section:not(.hidden) {
  /* Sizing & spacing */
  @apply gap-2 px-4 shrink;

  /* Layout & positioning */
  @apply flex items-center relative;

  /* Colors */
  @apply bg-transparent;
}

/* Remove horizontal padding on mobile for tighter icon spacing */
@media (max-width: 767px) {
  .search-section:not(.hidden) {
    @apply p-0;
  }
}

/* Compact search for tablet range */
@media (min-width: 768px) and (max-width: 1023px) {
  .search-section {
    @apply px-1 gap-1;
  }

  .search-desktop input {
    @apply h-8 text-sm py-1.5 px-3 max-w-64;
  }

  .search-desktop button {
    @apply h-8 w-8 p-1;
  }
}

/* Tailwind sm and below (below 640px) - mobile search */
@media (max-width: 639px) {
  .search-section {
    @apply p-0 gap-0 flex-none min-w-10 w-auto;
  }

  .search-toggle-button {
    @apply flex shrink-0 w-10 h-10 rounded-lg bg-transparent;
  }

  .search-toggle-button:hover {
    @apply bg-transparent;
  }

  .search-desktop {
    @apply hidden;
  }

  /* Ensure any desktop search elements are hidden */
  #searchbox-desktop,
  #hits-desktop {
    @apply hidden;
  }
}

/* Tailwind sm to md (640px-767px) - tablet range, compact search */
@media (min-width: 640px) and (max-width: 767px) {
  .search-section {
    @apply px-4 gap-1 flex-[0_1_50] min-w-[37.5];
  }

  .search-desktop input {
    @apply w-full text-sm max-w-50;
  }
}

/* ===== SEARCH TOGGLE BUTTON (MOBILE) ===== */

.search-toggle-button {
  /* Sizing & spacing */
  @apply w-10 h-10 p-2;

  /* Layout & positioning */
  @apply flex items-center justify-center;

  /* Border & shape */
  @apply border-none rounded-lg;

  /* Colors */
  @apply bg-transparent text-neutral-500;

  /* Interactive & animation */
  @apply transition-colors duration-200 cursor-pointer;
}

/* Hide toggle button on desktop - search bar is inline */
@media (min-width: 640px) {
  .search-toggle-button {
    @apply hidden;
  }
}

.search-icon {
  /* Sizing & spacing */
  @apply w-6 h-6;

  /* Colors */
  @apply text-sv-purple-700;
}

/* ===== SEARCH DROPDOWN ===== */

.search-dropdown {
  /* Sizing & spacing */
  @apply p-4;

  /* Layout & positioning */
  @apply absolute top-full left-0 right-0 z-50 hidden;

  /* Border & shape */
  @apply border-t border-sv-purple-700/15 shadow-lg;

  /* Colors */
  @apply bg-sv-purple-100;
}

/* Responsive search dropdown - full width on mobile */
@media (max-width: 768px) {
  .search-dropdown {
    @apply rounded-none border-l-0 border-r-0 w-screen max-w-full overflow-x-hidden bg-sv-purple-100 border-t border-sv-purple-700/15 left-1/2 -translate-x-1/2;
  }

  .search-dropdown.show {
    @apply block -translate-x-1/2;
  }
}

/* Tailwind md+ (768px+) - desktop search dropdown */
@media (min-width: 768px) {
  .search-dropdown {
    @apply left-auto right-0 border border-sv-purple-700/15 rounded-lg mt-2 min-w-75;
  }
}

/* Mobile search dropdown specific styles */
.search-dropdown .search-container {
  @apply justify-start w-full max-w-full overflow-hidden p-0 m-0;
}

.search-dropdown .search-results {
  @apply static mt-2 right-auto w-full max-w-full overflow-x-hidden;
}

/* Ensure Algolia search input doesn't overflow on mobile */
@media (max-width: 768px) {
  .search-dropdown {
    @apply p-3;
  }

  .search-dropdown .search-container {
    @apply w-full max-w-full p-0 m-0;
  }

  .search-dropdown .search-container input {
    @apply w-full max-w-full box-border;
  }

  .search-dropdown .ais-SearchBox {
    @apply w-full max-w-full;
  }

  .search-dropdown .ais-SearchBox-form {
    @apply w-full max-w-full;
  }

  .search-dropdown .ais-SearchBox-input {
    @apply w-full max-w-full box-border pr-10;
  }

  /* Hide submit button on mobile - instant search doesn't need it */
  .search-dropdown .ais-SearchBox-submit {
    @apply hidden;
  }
}

/* Additional constraints for very small mobile screens (iPhone SE, etc.) */
@media (max-width: 480px) {
  .search-dropdown {
    @apply p-2;
  }

  .search-dropdown .ais-SearchBox-input {
    @apply text-sm;
  }
}

/* Focus and interaction improvements for mobile */
@media (max-width: 768px) {
  .search-dropdown .ais-SearchBox-input:focus {
    @apply outline-none border-sv-purple-700 ring-2 ring-sv-purple-700/10;
  }
}

/* ===== DESKTOP SEARCH ===== */

.search-desktop {
  /* Sizing & spacing */
  @apply gap-2;

  /* Layout & positioning */
  @apply flex items-center relative;

  /* Colors */
  @apply bg-transparent;
}

.search-container {
  /* Sizing & spacing */
  @apply p-0 m-0;

  /* Layout & positioning */
  @apply flex items-center justify-end relative;

  /* Colors */
  @apply bg-transparent;
}

.search-results {
  /* Sizing & spacing */
  @apply mt-2 w-full;

  /* Layout & positioning */
  @apply absolute top-full left-0 z-50;
}

/* Match search results width to search input width at different breakpoints */
.search-results .ais-Hits {
  @apply sm:w-[200px] md:w-64;
}

/* ===== SEARCH HIT ITEMS ===== */

.search-hit-item {
  /* Sizing & spacing */
  @apply p-2;

  /* Layout & positioning */
  @apply block;

  /* Border & shape */
  @apply rounded-2xl;

  /* Interactive & animation */
  @apply transition-colors duration-200 cursor-pointer;
}

.search-hit-item:hover {
  @apply bg-sv-purple-50;
}

/* ===== ALGOLIA SEARCH COMPONENTS ===== */
/* IMPORTANT - handle uses of !important carefully in session 5,
   as these could truly be needed to override algolia's default styling */

.ais-SearchBox {
  @apply bg-transparent;
}

.ais-SearchBox-form {
  /* Sizing & spacing */
  @apply p-0 m-0;

  /* Layout & positioning */
  @apply relative flex items-center;

  /* Border & shape */
  @apply border-none outline-none;

  /* Colors */
  @apply bg-transparent;
}

.ais-SearchBox-input {
  /* Sizing & spacing */
  @apply p-2 pr-20 flex-1;

  /* Border & shape */
  @apply border border-neutral-300 rounded-2xl;

  /* Colors */
  @apply bg-sv-purple-25 text-neutral-800;
}

.ais-SearchBox-input:focus {
  /* Border & shape */
  @apply outline-none border-sv-purple-700 ring-2 ring-sv-purple-700/10;
}

.ais-SearchBox-submit {
  /* Layout & positioning */
  @apply absolute right-2;

  /* Border & shape */
  @apply outline-none;

  /* Colors */
  @apply text-sv-purple-400 bg-transparent;

  /* Interactive & animation */
  @apply transition-colors duration-200 cursor-pointer;

  /* Typography */
  @apply text-lg;

  /* All !important overrides for Algolia defaults */
  padding: 0px !important;
  border: none !important;
  border-radius: 0 !important;
  margin: 0 !important;
  box-shadow: none !important;
  font-family: inherit !important;
  font-weight: inherit !important;
  text-decoration: none !important;
}

.ais-SearchBox-submitIcon {
  /* Sizing & spacing */
  @apply mt-0 ml-1.5 p-0 w-5 h-5;
}

.ais-SearchBox-reset {
  /* Sizing & spacing */
  @apply py-1 px-2;

  /* Layout & positioning */
  @apply absolute flex items-center justify-center right-12;

  /* Border & shape */
  @apply border-none outline-none;

  /* Colors */
  @apply bg-transparent text-neutral-500;

  /* Interactive & animation */
  @apply cursor-pointer transition-colors duration-200;
}

.ais-SearchBox-reset:hover {
  @apply text-neutral-700;
}

.ais-SearchBox-resetIcon {
  @apply w-3.5 h-3.5;
}

/* ===== SEARCH RESULTS CONTAINER ===== */

.ais-Hits {
  /* Sizing & spacing */
  @apply p-0 mr-0 w-64;

  /* Border & shape */
  @apply border border-neutral-300 rounded-lg shadow-lg;

  /* Colors */
  @apply bg-sv-purple-200;
}

.ais-Hits-item a {
  /* Sizing & spacing */
  @apply p-0;

  /* Layout & positioning */
  @apply block;

  /* Border & shape */
  @apply rounded-2xl;

  /* Colors */
  @apply text-neutral-800 no-underline;

  /* Interactive & animation */
  @apply transition-colors duration-200 cursor-pointer;
}

.ais-Hits-item a:hover {
  /* Border & shape */
  @apply rounded-2xl;

  /* Colors */
  @apply bg-sv-purple-400 text-neutral-800;
}

.ais-Highlight-highlighted {
  /* Sizing & spacing */
  @apply py-0.5 px-1;

  /* Border & shape */
  @apply rounded;

  /* Colors */
  @apply bg-sv-purple-400;
}