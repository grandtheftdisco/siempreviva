/* Search Stylesheet */
/* Contains all search-related styles including Algolia components and search dropdowns */

/* ===== SEARCH SECTION LAYOUT ===== */

.search-section:not(.hidden) {
  /* Sizing & spacing */
  @apply gap-2 px-4 shrink;

  /* Layout & positioning */
  @apply flex items-center relative;

  /* Colors */
  @apply bg-transparent;
}

/* AUDIT - mobile first? */
@media (max-width: 767px) {
  .search-section:not(.hidden) {
    @apply p-0;
  }
}

/* AUDIT - reconcile this with mobile-first approach issue above  */
.mobile-nav-items .search-section {
  @apply flex-none flex items-center;
}

/* AUDIT - reconcile this with the media query below */
@media (min-width: 768px) {
  .search-section {
    /* Spacing */
    @apply mr-4;

    /* Layout */
    @apply flex-1 flex items-center justify-end;
  }
}

/* Tablet: compact search */
@media (min-width: 768px) and (max-width: 1023px) {
  .search-section {
    @apply px-1 gap-1;
  }

  .search-desktop input {
    /* Sizing & spacing */
    @apply h-8 py-1.5 px-3 max-w-64;

    /* Typography */
    @apply text-sm;
  }

  .search-desktop button {
    @apply h-8 w-8 p-1;
  }
}

/* AUDIT - is this XS only or does it include standard mobile? */
@media (max-width: 639px) {
  .search-section {
    /* Sizing & spacing */
    @apply p-0 gap-0 min-w-10 w-auto;

    /* Layout */
    @apply flex-none;
  }

  .search-toggle-button {
    /* Sizing */
    @apply w-10 h-10;

    /* Layout */
    @apply flex shrink-0;

    /* Shape */
    @apply rounded-lg;

    /* Colors */
    @apply bg-transparent;
  }

  .search-toggle-button:hover {
    @apply bg-transparent;
  }

  .search-desktop {
    @apply hidden;
  }

  /* Ensure any desktop search elements are hidden */
  #searchbox-desktop,
  #hits-desktop {
    @apply hidden;
  }
}

/* Tablet range, compact search */
/* AUDIT - duplicate with tablet range query above? */
@media (min-width: 640px) and (max-width: 767px) {
  .search-section {
    /* Sizing & spacing */
    @apply px-4 gap-1 min-w-[37.5];

    /* Layout */
    @apply flex-[0_1_50];
  }

  .search-desktop input {
    /* Sizing */
    @apply w-full max-w-50;

    /* Typography */
    @apply text-sm;
  }
}

/* ===== SEARCH TOGGLE BUTTON (MOBILE) ===== */

.search-toggle-button {
  /* Sizing & spacing */
  @apply w-10 h-10 p-2;

  /* Layout & positioning */
  @apply flex items-center justify-center;

  /* Border & shape */
  @apply border-none rounded-lg;

  /* Colors */
  @apply bg-transparent text-neutral-500;

  /* Interactive & animation */
  @apply transition-colors duration-200 cursor-pointer;
}

/* Desktop: Hide toggle button (search bar is inline) */
@media (min-width: 640px) {
  .search-toggle-button {
    @apply hidden;
  }
}

.search-icon {
  /* Sizing & spacing */
  @apply w-6 h-6;

  /* Colors */
  @apply text-sv-purple-700;
}

/* ===== SEARCH DROPDOWN ===== */

.search-dropdown {
  /* Sizing & spacing */
  @apply p-4;

  /* Layout & positioning */
  @apply absolute top-full left-0 right-0 z-50 hidden;

  /* Border & shape */
  @apply border-t border-sv-purple-700/15 shadow-lg;

  /* Colors */
  @apply bg-sv-purple-100;
}

/* Responsive search dropdown - full width on mobile */
/* AUDIT - is this mobile firsT? */
@media (max-width: 768px) {
  .search-dropdown {
    /* Sizing */
    @apply w-screen max-w-full;

    /* Layout & positioning */
    @apply left-1/2 -translate-x-1/2;

    /* Border & shape */
    @apply rounded-none border-l-0 border-r-0 border-t border-sv-purple-700/15;

    /* Colors */
    @apply bg-sv-purple-100;

    /* Behavior */
    @apply overflow-x-hidden;
  }

  .search-dropdown.show {
    @apply block -translate-x-1/2;
  }
}

/* Tailwind md+ (768px+) - desktop search dropdown */
/* AUDIT - does this include tablets too? */
@media (min-width: 768px) {
  .search-dropdown {
    /* Sizing & spacing */
    @apply min-w-75 mt-2;

    /* Layout & positioning */
    @apply left-auto right-0;

    /* Border & shape */
    @apply border border-sv-purple-700/15 rounded-lg;
  }
}

.search-dropdown .search-container {
  /* Sizing & spacing */
  @apply w-full max-w-full p-0 m-0;

  /* Layout */
  @apply justify-start;

  /* Behavior */
  @apply overflow-hidden;
}

.search-dropdown .search-results {
  /* Sizing & spacing */
  @apply w-full max-w-full mt-2;

  /* Layout & positioning */
  @apply static right-auto;

  /* Behavior */
  @apply overflow-x-hidden;
}

/* Ensure Algolia search input doesn't overflow on mobile */
/* AUDIT - is this mobile first? */
@media (max-width: 768px) {
  .search-dropdown {
    @apply p-3;
  }

  .search-dropdown .search-container {
    @apply w-full max-w-full p-0 m-0;
  }

  .search-dropdown .search-container input {
    @apply w-full max-w-full box-border;
  }

  .search-dropdown .ais-SearchBox {
    @apply w-full max-w-full;
  }

  .search-dropdown .ais-SearchBox-form {
    @apply w-full max-w-full;
  }

  .search-dropdown .ais-SearchBox-input {
    @apply w-full max-w-full pr-10;
  }

  /* Hide submit button on mobile - instant search doesn't need it */
  .search-dropdown .ais-SearchBox-submit {
    @apply hidden;
  }
}

/* XS Screens */
@media (max-width: 480px) {
  .search-dropdown {
    @apply p-2;
  }

  .search-dropdown .ais-SearchBox-input {
    @apply text-sm;
  }
}

/* Focus and interaction improvements for mobile */
/* AUDIT - is this mobile first? */
@media (max-width: 768px) {
  .search-dropdown .ais-SearchBox-input:focus {
    @apply outline-none border-sv-purple-700 ring-2 ring-sv-purple-700/10;
  }
}

/* ===== DESKTOP SEARCH ===== */

/* AUDIT - this is not mobile first */
.search-desktop {
  /* Sizing & spacing */
  @apply gap-2;

  /* Layout & positioning */
  @apply flex items-center relative;

  /* Colors */
  @apply bg-transparent;
}

.search-container {
  /* Sizing & spacing */
  @apply p-0 m-0;

  /* Layout & positioning */
  @apply flex items-center justify-end relative;

  /* Colors */
  @apply bg-transparent;
}

.search-results {
  /* Sizing & spacing */
  @apply mt-2 w-full;

  /* Layout & positioning */
  @apply absolute top-full left-0 z-50;
}

/* Match search results width to search input width at different breakpoints */
.search-results .ais-Hits {
  @apply sm:w-[12.5rem] md:w-64;
}

/* ===== SEARCH HIT ITEMS ===== */

.search-hit-item {
  /* Sizing & spacing */
  @apply p-2;

  /* Layout & positioning */
  @apply block;

  /* Border & shape */
  @apply rounded-2xl;

  /* Interactive & animation */
  @apply transition-colors duration-200 cursor-pointer;
}

.search-hit-item:hover {
  /* Colors */
  @apply bg-sv-purple-50;
}

/* ===== ALGOLIA SEARCH COMPONENTS ===== */

.ais-SearchBox {
  @apply bg-transparent;
}

.ais-SearchBox-form {
  /* Sizing & spacing */
  @apply p-0 m-0;

  /* Layout & positioning */
  @apply relative flex items-center;

  /* Border & shape */
  @apply border-none outline-none;

  /* Colors */
  @apply bg-transparent;
}

.ais-SearchBox-input {
  /* Sizing & spacing */
  @apply p-2 pr-20 flex-1;

  /* Border & shape */
  @apply border border-neutral-300 rounded-2xl;

  /* Colors */
  @apply bg-sv-purple-25 text-neutral-800;
}

.ais-SearchBox-input:focus {
  @apply outline-none border-sv-purple-700 ring-2 ring-sv-purple-700/10;
}

.ais-SearchBox-submit {
  /* Layout & positioning */
  @apply absolute right-2;

  /* Border & shape */
  @apply outline-none;

  /* Colors */
  @apply text-sv-purple-400 bg-transparent;

  /* Interactive & animation */
  @apply transition-colors duration-200 cursor-pointer;

  /* Typography */
  @apply text-lg;

  /* Algolia default overrides */
  @apply p-0 border-none rounded-none m-0 shadow-none no-underline font-[family:inherit] font-[weight:inherit];
}

.ais-SearchBox-submitIcon {
  @apply mt-0 ml-1.5 p-0 w-5 h-5;
}

.ais-SearchBox-reset {
  /* Sizing & spacing */
  @apply py-1 px-2;

  /* Layout & positioning */
  @apply absolute flex items-center justify-center right-12;

  /* Border & shape */
  @apply border-none outline-none;

  /* Colors */
  @apply bg-transparent text-neutral-500;

  /* Interactive & animation */
  @apply cursor-pointer transition-colors duration-200;
}

.ais-SearchBox-reset:hover {
  @apply text-neutral-700;
}

.ais-SearchBox-resetIcon {
  @apply w-3.5 h-3.5;
}

/* ===== SEARCH RESULTS CONTAINER ===== */

.ais-Hits {
  /* Sizing & spacing */
  @apply p-0 mr-0 w-64;

  /* Border & shape */
  @apply border border-neutral-300 rounded-lg shadow-lg;

  /* Colors */
  @apply bg-sv-purple-200;
}

.ais-Hits-item a {
  /* Sizing & spacing */
  @apply p-0;

  /* Layout & positioning */
  @apply block;

  /* Border & shape */
  @apply rounded-2xl;

  /* Colors */
  @apply text-neutral-800 no-underline;

  /* Interactive & animation */
  @apply transition-colors duration-200 cursor-pointer;
}

.ais-Hits-item a:hover {
  /* Border & shape */
  @apply rounded-2xl;

  /* Colors */
  @apply bg-sv-purple-400 text-neutral-800;
}

.ais-Highlight-highlighted {
  /* Sizing & spacing */
  @apply py-0.5 px-1;

  /* Border & shape */
  @apply rounded;

  /* Colors */
  @apply bg-sv-purple-400;
}